## API для реферальной системы

Описание:
Необходимо разработать простой RESTful API сервис для реферальной
системы.

Функциональные требования:

### ● Регистрация и аутентификация пользователя (JWT, Oauth 2.0);

/user/register - регистрация пользователя
в body отправить

{
    "email":"",
    "password":""
}

если регистрация прошла успешно ответом придёт user_id

/user/auth - авторизация пользователя
в body отправить

{
    "email":"",
    "password":""
}

если авторизация прошла успешно ответом придёт

{
    "token": "",
    "user_id":
}


### ● Аутентифицированный пользователь должен иметь возможность создать или удалить свой реферальный код.Одновременно может быть активен только 1 код. При создании кода обязательно должен быть задан его срок годности;
для проверки аунтефикации пользователя в headers нужно передать заголовок authorization и токен

/refer/update_code - создание или редактирование реферального кода
в body отправить

{
    "day":
}

если создание прошло успешно ответом придёт

{
    "user_id":
    "code": "",
    "exp_date": ""
}

/refer/delete - удалить код у пользователя, чья авторизация в токене


### ● Возможность получения реферального кода по email адресу реферера;

/refer/getcode
в body отправить

{
    "email": ""
}

успешный ответ

{
    "user_id": ,
    "code": "",
    "exp_date": ""
}


### ● Возможность регистрации по реферальному коду в качестве реферала;

/referals/register
в body отправить

{
    "email": ""
    "code":на который проиcходит подписка
}

успешный ответ

{
    "id": ,
    "email": "",
    "exp_date": "",
    "ref_key": {
        "user_id": ,
        "code": "",
        "exp_date": ""
    }
}


### ● Получение информации о рефералах по id реферера;

/referals/list
в body отправить

{
    "user_id": 4
}

успешный ответ - список из подписаных

[
    {
        "id": ,
        "email": "",
        "code": "",
        "ref_key": {
            "user_id": 0,
            "code": "",
            "exp_date": ""
        }
    }
]

● UI документация (Swagger/ReDoc).

Опциональные задачи:

● Кеширование реферальных кодов с использованием in-memory БД;

● Readme.md файл с описанием проекта и инструкциями по запуску и
тестированию

Стек:

● Использование СУБД и миграций (Sqlite, PostgreSQL, MySQL);

● Размещение проекта на GitHub;


Требования к проекту:

● Чистота и читаемость кода;

● Все I/O bound операции должны быть асинхронными;

● Проект должен быть хорошо структурирован;

● Проект должен быть простым в деплое, обеспечивать обработку
нестандартных ситуаций, быть устойчивой к неправильным
действиям пользователя и т.д





переменные окружения файл .env

SERVICE_NAME = <имя сервиса>

HOST=

PORT=

SECRET_KEY = <на его основе генерируется и проверяется
токен при изменении все пользоаптели разлогинятся>

EXP_TOKEN_DAY = <Время жизни токена в приложении>

DB_HOST=

DB_PORT=

DB_USER=

DB_PASSW=

DB_NAME=

DB_SCHEMA=


для локального запуска:

собрать бд postgresql

заполнить .env

$ make refers-run